!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t){},function(e,t){},function(e,t,n){var r,a;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)&&r.length){var l=n.apply(null,r);l&&e.push(l)}else if("object"===a)for(var i in r)o.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}var o={}.hasOwnProperty;"undefined"!==typeof e&&e.exports?(n.default=n,e.exports=n):(r=[],void 0!==(a=function(){return n}.apply(t,r))&&(e.exports=a))}()},function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=wp,a=r.data,o=(r.apiFetch,a.registerStore),l={values:{stars:0,ratings:0}},i={setValue:function(e,t){return{type:"SET_VALUE",item:e,value:t}}};o("stars-totals",{reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case"SET_VALUE":return Object.assign({},e,{values:Object.assign({},e.values,n({},t.item,t.value))})}return e},actions:i,selectors:{getValue:function(e,t){return e.values[t]}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),a=n(6),o=wp.blocks.registerBlockType,l=wp.data,i=l.select,s=l.dispatch,u=l.subscribe;[r,a].forEach(function(e){var t=e.name,n=e.settings;o(t,n)});var c=function(){return i("core/editor").getBlocks()},p=c(),f=function(){},m=function e(){var t=c(),n=t!==p;p=t;var r=0,a=0;t.forEach(function(t){if(n&&"emrikol/stars-rating"===t.name&&(r+=t.attributes.rating,a+=t.attributes.star_count),"emrikol/stars-rating-total"===t.name){var o=i("stars-totals").getValue("stars"),l=i("stars-totals").getValue("ratings"),s=Math.round(t.attributes.star_count*(l/o)*2)/2;f(),wp.data.dispatch("core/editor").updateBlockAttributes(t.clientId,{rating:s}),f=u(e)}}),n&&(s("stars-totals").setValue("ratings",r),s("stars-totals").setValue("stars",a))};f=u(m)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"name",function(){return k}),n.d(t,"settings",function(){return C});var l=n(0),i=(n.n(l),n(1)),s=(n.n(i),n(2)),u=n.n(s),c=n(3),p=(n.n(c),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),f=wp.i18n.__,m=wp.element,g=m.Component,d=m.Fragment,b=wp.components,y=b.PanelBody,w=b.RangeControl,v=wp.editor,h=v.BlockControls,E=v.AlignmentToolbar,O=v.InspectorControls,j=wp.data,S=(j.select,j.dispatch,function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),p(t,[{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,r=e.isSelected,a=(e.toggleSelection,t.rating),o=t.star_count,l=t.alignment,i=function(e){n({alignment:e})},s=function(e){(e===a||e<0)&&(e=0),n({rating:e})},c=function(e){e<1?e=1:e<a&&n({rating:e}),n({star_count:e})};return r?wp.element.createElement(d,null,wp.element.createElement(O,null,wp.element.createElement(y,null,wp.element.createElement(w,{label:f("Star Count"),value:o,onChange:function(e){return c(e)},min:1,max:10}))),wp.element.createElement(h,null,wp.element.createElement(E,{value:l,onChange:i})),wp.element.createElement("div",{class:"stars-rating",style:{textAlign:l}},wp.element.createElement("p",{class:"editor-hint"},"(Stars Rating: ",a,")"),wp.element.createElement("fieldset",{class:"rating"},function(){for(var e=[],t=_.uniqueId("rating-"),n=2*o;n>=1;n--){var r=_.uniqueId("stars-");e.push(wp.element.createElement(d,null,wp.element.createElement("input",{type:"radio",checked:a===n/2,onClick:s.bind(null,n/2),id:r,name:t,value:n/2}),wp.element.createElement("label",{title:n/2,class:n%2==0?"full":"half",for:r})))}return e}()))):wp.element.createElement(d,null,wp.element.createElement("div",{class:"stars-rating",style:{textAlign:l}},function(){for(var e=[],t=1;t<=2*o;t++)e.push(wp.element.createElement("span",{className:u()({full:t%2==0,half:t%2!=0,active:t/2<=a}),title:t/2}));return e}()))}}]),t}(g)),k="emrikol/stars-rating",C={title:f("Stars Rating"),description:f("Star Ratings in half-star increments"),icon:"star-filled",category:"common",keywords:[f("Stars"),f("Rating")],attributes:{alignment:{type:"string"},rating:{type:"number",default:0},star_count:{type:"number",default:5}},edit:S,save:S}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"name",function(){return j}),n.d(t,"settings",function(){return S});var l=n(0),i=(n.n(l),n(1)),s=(n.n(i),n(2)),u=n.n(s),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=wp.i18n.__,f=wp.element,m=f.Component,g=f.Fragment,d=wp.components,b=d.PanelBody,y=d.RangeControl,w=wp.editor,v=w.BlockControls,h=w.AlignmentToolbar,_=w.InspectorControls,E=wp.data,O=(E.select,E.dispatch,function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,r=e.isSelected,a=(e.toggleSelection,t.star_count),o=t.alignment,l=t.rating,i=function(e){n({alignment:e})},s=function(e){n({star_count:e})},c=function(){for(var e=[],t=1;t<=2*a;t++)e.push(wp.element.createElement("span",{className:u()({full:t%2==0,half:t%2!=0,active:t/2<=l}),title:t/2}));return e};return r?wp.element.createElement(g,null,wp.element.createElement(_,null,wp.element.createElement(b,null,wp.element.createElement(y,{label:p("Star Count"),value:a,onChange:function(e){return s(e)},min:1,max:10}))),wp.element.createElement(v,null,wp.element.createElement(h,{value:o,onChange:i})),wp.element.createElement("div",{class:"stars-rating",style:{textAlign:o}},wp.element.createElement("p",{class:"editor-hint"},"(Stars Rating Total: ",l,")"),c())):wp.element.createElement(g,null,wp.element.createElement("div",{class:"stars-rating",style:{textAlign:o}},c()))}}]),t}(m)),j="emrikol/stars-rating-total",S={title:p("Stars Rating Total"),description:p("The total of all Star Ratings"),icon:"star-filled",category:"common",keywords:[p("Stars"),p("Rating")],attributes:{alignment:{type:"string"},star_count:{type:"number",default:5},rating:{type:"number",default:0}},edit:O,save:O}}]);